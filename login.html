<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>...</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root {
            --primary: #00d2ff;
            --secondary: #3a7bd5;
            --dark: #06070a; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
            --text-main: #ffffff; /* ‡∏™‡∏µ‡∏ü‡∏≠‡∏ô‡∏ï‡πå */
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: var(--dark);
            color: var(--text-main);
            font-family: 'Kanit', sans-serif;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(0, 210, 255, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(58, 123, 213, 0.05) 0%, transparent 40%);
        }

    /* --- SNOWFALL EFFECT --- */
    .snow-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
    .snowflake { position: absolute; top: -10px; background: white; border-radius: 50%; filter: blur(1px); opacity: 0.2; animation: fall linear infinite; }
    @keyframes fall {
        0% { transform: translateY(0) translateX(0); opacity: 0; }
        10% { opacity: 0.2; }
        100% { transform: translateY(105vh) translateX(50px); opacity: 0; }
    }
    .snowflake:nth-child(1) { width: 4px; height: 4px; left: 10%; animation-duration: 10s; }
    .snowflake:nth-child(2) { width: 5px; height: 5px; left: 30%; animation-duration: 15s; animation-delay: 2s; }
    .snowflake:nth-child(3) { width: 3px; height: 3px; left: 50%; animation-duration: 12s; animation-delay: 4s; }
    .snowflake:nth-child(4) { width: 4px; height: 4px; left: 70%; animation-duration: 18s; animation-delay: 1s; }
    .snowflake:nth-child(5) { width: 3px; height: 3px; left: 90%; animation-duration: 14s; animation-delay: 5s; }

    /* --- NAVBAR --- */
    .navbar-modern { background: rgba(6, 7, 10, 0.7); backdrop-filter: blur(20px); border-bottom: 1px solid var(--glass-border); z-index: 1000; }
    .nav-auth-btn {
        display: flex; align-items: center; gap: 10px; padding: 10px 24px; margin: 0 8px;
        border-radius: 14px; font-weight: 600; font-size: 13.5px; text-decoration: none !important;
        transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1); height: 44px; position: relative; overflow: hidden;
    }
    .nav-auth-shine { position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent); transition: left 0.5s ease; }
    .nav-auth-btn:hover .nav-auth-shine { left: 100%; }
    .nav-auth-login { background: rgba(255, 255, 255, 0.04); color: rgba(255, 255, 255, 0.85) !important; backdrop-filter: blur(8px); }
    
    /* ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ö‡∏ô Nav ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô */
    .nav-auth-register { 
        background: linear-gradient(135deg, var(--primary), var(--secondary)); 
        border: 1px solid rgba(255, 255, 255, 0.1) !important; 
        color: #fff !important; 
        box-shadow: 0 4px 15px var(--purple-glow); 
    }

    /* --- FLOATING ELEMENTS --- */
    .float-element { position: absolute; background: var(--glass); backdrop-filter: blur(10px); border: 1px solid var(--glass-border); border-radius: 20px; padding: 18px; display: flex; align-items: center; gap: 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.4); z-index: 5; }
    @keyframes float-complex { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(2deg); } }
    .card-1 { top: 15%; right: 5%; width: 220px; animation: float-complex 8s infinite ease-in-out; }
    .card-2 { bottom: 20%; right: 5%; width: 240px; animation: float-complex 10s infinite ease-in-out -2s; }
    .icon-box { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #fff; }
    
    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô */
    .bg-blue, .bg-purple { background: linear-gradient(135deg, var(--primary), var(--secondary)); }

    /* --- LOGIN SECTION --- */
    .main-container { flex: 1; display: flex; align-items: center; justify-content: center; position: relative; z-index: 10; }
    .login-card {
        width: 100%; max-width: 420px; background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 28px; padding: 45px;
        box-shadow: 0 30px 60px rgba(0,0,0,0.4); animation: loginAppear 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    
    /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô Login ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô */
    .login-avatar { font-size: 60px; color: var(--primary); filter: drop-shadow(0 0 15px var(--purple-glow)); margin-bottom: 20px; }
    
    .input-group-custom { position: relative; margin-bottom: 22px; }
    .input-group-custom i { position: absolute; left: 18px; top: 50%; transform: translateY(-50%); color: rgba(255,255,255,0.3); transition: 0.3s; }
    .input-group-custom input { 
        width: 100%; padding: 14px 15px 14px 50px; background: rgba(255,255,255,0.04); 
        border: 1px solid rgba(255,255,255,0.05); border-radius: 15px; color: #fff; outline: none; transition: 0.3s; 
    }
    /* Input ‡∏ï‡∏≠‡∏ô‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô */
    .input-group-custom input:focus { border-color: var(--primary); background: rgba(255,255,255,0.08); box-shadow: 0 0 15px var(--purple-glow); }
    .input-group-custom input:focus + i { color: var(--primary); }

    /* ‡∏õ‡∏∏‡πà‡∏° Login ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô */
    .btn-login { 
        width: 100%; border: none; height: 50px; border-radius: 15px; font-weight: 600; 
        background: linear-gradient(135deg, var(--primary), var(--secondary)); color: #fff; 
        position: relative; overflow: hidden; transition: 0.3s;
    }
    .btn-login:hover { transform: translateY(-3px); box-shadow: 0 10px 20px var(--purple-glow); }

    /* --- FOOTER --- */
    .footer-premium { padding: 30px 0; text-align: center; z-index: 100; }
    .footer-line { width: 100%; max-width: 400px; height: 1px; background: linear-gradient(90deg, transparent, var(--primary), var(--secondary), transparent); margin: 0 auto 15px; opacity: 0.4; }
    .footer-brand { color: var(--primary); font-weight: 600; text-shadow: 0 0 10px var(--purple-glow); }

    /* --- SWEETALERT CUSTOM --- */
    .swal2-popup {
        border-radius: 20px !important;
        border: 1px solid var(--glass-border) !important;
        background: #06070a !important;
        color: #fff !important;
    }
    .swal2-popup.border-glass-alert {
        border: 1px solid var(--primary) !important;
        box-shadow: 0 0 20px var(--purple-glow) !important;
        border-radius: 20px !important;
    }
    /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡∏Ç‡∏≠‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô success ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å */
    .swal2-icon.swal2-success {
        border-color: var(--primary) !important;
        color: var(--primary) !important;
    }

    .swal2-icon.swal2-success [class^='swal2-success-line'] {
        background-color: var(--primary) !important;
    }

    .swal2-icon.swal2-success .swal2-success-ring {
        border: .25em solid var(--primary); /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏° */
        opacity: 0.3; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏à‡∏≤‡∏á‡∏•‡∏á‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡πÄ‡∏î‡πà‡∏ô */
    }

    /* ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‡∏Å‡πá‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏ò‡∏µ‡∏°‡∏î‡πâ‡∏ß‡∏¢ */
    .swal2-confirm {
        background: var(--primary) !important;
        background: linear-gradient(135deg, var(--primary), var(--secondary)) !important;
        box-shadow: 0 0 10px var(--purple-glow) !important;
        border-radius: 10px !important;
    }
    </style>
</head>
<body>
    <div id="loading-screen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #06070a; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; transition: opacity 0.5s ease;">
    <div class="spinner-border" style="width: 3rem; height: 3rem; color: #fff;" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
    <p style="margin-top: 15px; color: #fff; font-family: 'Kanit', sans-serif; letter-spacing: 1px; opacity: 0.8;">Loading...</p>
    </div>

    <div class="snow-container">
        <div class="snowflake"></div><div class="snowflake"></div><div class="snowflake"></div>
        <div class="snowflake"></div><div class="snowflake"></div>
    </div>

<script type="module">
    // 1. Import Firebase Modules (‡∏£‡∏ß‡∏°‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { 
        getAuth, 
        onAuthStateChanged, 
        signOut, 
        signInWithEmailAndPassword,
        createUserWithEmailAndPassword 
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { 
        getDatabase, 
        ref, 
        set, 
        get, 
        onValue 
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    // 2. Firebase Config (‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)
    const firebaseConfig = {
        apiKey: "AIzaSyAu_tpFJkolV90YBMFwzSUIu8KnusAB8mg",
        authDomain: "verify-hiz.firebaseapp.com",
        databaseURL: "https://verify-hiz-default-rtdb.firebaseio.com",
        projectId: "verify-hiz",
        storageBucket: "verify-hiz.firebasestorage.app",
        messagingSenderId: "1001871666471",
        appId: "1:1001871666471:web:daea600bd157f907634d02",
        measurementId: "G-2F4W88C6HL"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);
    const authArea = document.getElementById('auth-area');

    const themePrimary = getComputedStyle(document.documentElement).getPropertyValue('--primary').trim();

    // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á LOG ‡πÑ‡∏õ‡∏¢‡∏±‡∏á DISCORD (‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î) ---
    const sendUserLog = async (eventTitle, userEmail, userUid, color) => {
        try {
            const snapshot = await get(ref(db, 'config/userWebhook'));
            const webhookUrl = snapshot.val();
            if (!webhookUrl || !webhookUrl.includes('/api/webhooks/')) return;

            const device = navigator.platform;
            const browser = navigator.userAgent.split(' ').pop();

            await fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    embeds: [{
                        title: eventTitle,
                        color: color,
                        fields: [
                            { name: "üë§ ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ", value: `**${userEmail}**`, inline: true },
                            { name: "üÜî UID", value: `\`${userUid}\``, inline: true },
                            { name: "üíª ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå/OS", value: `\`${device}\``, inline: true },
                            { name: "üåê Browser", value: `\`${browser}\``, inline: true },
                            { name: "‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤", value: new Date().toLocaleString('th-TH'), inline: false }
                        ],
                        footer: { text: "Security Logging System" },
                        timestamp: new Date().toISOString()
                    }]
                })
            });
        } catch (err) { console.error("Log Error:", err); }
    };

    // --- 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô LOGIN ---
    const loginForm = document.getElementById('login-form');
    if (loginForm) {
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            const fakeEmail = `${username}@testshop.com`;

            try {
                const userCredential = await signInWithEmailAndPassword(auth, fakeEmail, password);
                
                // ‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Login
                await sendUserLog("üîë ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö", username, userCredential.user.uid, 3447003);

                Swal.fire({
                icon: 'success',
                title: '<span style="font-family: \'Kanit\', sans-serif; font-weight: 600;">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>',
                html: '<span style="font-family: \'Kanit\', sans-serif; opacity: 0.8;">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>',
                background: '#06070a', // ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏ï‡∏≤‡∏° CSS ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                color: '#fff',
                iconColor: '#00d2ff', // ‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ --primary
                showConfirmButton: false,
                timer: 1500,
                timerProgressBar: true, // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ñ‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ß‡∏¥‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
                heightAuto: false,
                customClass: {
                    popup: 'border-glass-alert' // ‡πÉ‡∏™‡πà class ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ï‡πà‡∏á‡∏Ç‡∏≠‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô CSS ‡πÑ‡∏î‡πâ
                },
                showClass: {
                    popup: 'animate__animated animate__fadeInUp' // ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ animate.css ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡πÉ‡∏ä‡πâ default ‡∏Å‡πá‡πÑ‡∏î‡πâ
                }
            }).then(() => { 
                window.location.href = "shop.html"; 
            });

            } catch (error) {
            let msg = "‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";

            Swal.fire({
                icon: 'error',
                title: '<span style="font-family: \'Kanit\', sans-serif; font-weight: 600;">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>',
                text: msg,
                background: '#06070a',
                color: '#fff',
                iconColor: '#ff4b2b',
                confirmButtonColor: '#00d2ff',
                confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',
                heightAuto: false,
                customClass: {
                    popup: 'border-glass-error'
                }
            });
        }
        });
    }

    // 2. ‡∏™‡πà‡∏ß‡∏ô‡∏î‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏µ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô (‡∏û‡∏≤‡∏ò config)
    const configRef = ref(db, 'config');
    onValue(configRef, (snapshot) => {
        const config = snapshot.val();
        if (config) {
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡πá‡∏ö
            if (config.webName) document.title = config.webName;

            if (config.themeColor) {
                const pColor = config.themeColor;
                const sColor = config.secondaryColor || pColor; 
                document.documentElement.style.setProperty('--primary', pColor);
                document.documentElement.style.setProperty('--secondary', sColor);
                document.documentElement.style.setProperty('--purple-glow', pColor + '4d');
                // ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (Solid) ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
                document.body.style.backgroundImage = `
                    radial-gradient(circle at 20% 30%, ${pColor}0d 0%, transparent 40%),
                    radial-gradient(circle at 80% 70%, ${sColor}0d 0%, transparent 40%)
                `;
            }

            // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà: ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î ---
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.style.opacity = '0'; // ‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡∏à‡∏≤‡∏á‡∏≠‡∏≠‡∏Å
                setTimeout(() => {
                    loadingScreen.style.display = 'none'; // ‡∏ô‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
                }, 500); // ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö transition ‡πÉ‡∏ô style
            }

            // --- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏µ‡∏ò‡∏µ‡∏° ---
            if (config.themeColor) {
                const pColor = config.themeColor;
                // ‡∏ñ‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏µ‡∏£‡∏≠‡∏á ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏ó‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Linear Gradient ‡∏î‡∏π‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
                const sColor = config.secondaryColor || pColor; 

                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï CSS Variables ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                document.documentElement.style.setProperty('--primary', pColor);
                document.documentElement.style.setProperty('--secondary', sColor);
                
                // ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏µ‡πÅ‡∏™‡∏á Glow (‡∏à‡∏≤‡∏á‡∏•‡∏á 30%)
                document.documentElement.style.setProperty('--purple-glow', pColor + '4d');

                // ‡∏õ‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÅ‡∏™‡∏á‡∏ü‡∏∏‡πâ‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                document.body.style.backgroundImage = `
                    radial-gradient(circle at 20% 30%, ${pColor}0d 0%, transparent 40%),
                    radial-gradient(circle at 80% 70%, ${sColor}0d 0%, transparent 40%)
                `;
            }
        }
    });

    // --- 1. ‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô (Config) ---
    onValue(ref(db, 'config'), (snapshot) => {
        const config = snapshot.val();
        if (config) {
            // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡πÉ‡∏ô‡∏à‡∏∏‡∏î‡∏ï‡πà‡∏≤‡∏á‡πÜ
            if (config.siteName) {
                document.title = config.siteName;
                const siteNameElements = [
                    document.getElementById('site-name-display'), // ‡πÉ‡∏ô Hero
                    document.getElementById('site-name-nav')      // ‡πÉ‡∏ô Navbar (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                ];
                siteNameElements.forEach(el => { if(el) el.innerText = config.siteName; });
            }

            // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏µ‡∏ò‡∏µ‡∏°‡∏´‡∏•‡∏±‡∏Å (‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠ Glow ‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°)
            if (config.themeColor) {
                document.documentElement.style.setProperty('--primary', config.themeColor);
            }

            const primaryColor = config.themeColor || '#00d2ff';
            const bgColor = config.bgColor || '#06070a';

            // 1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å (Theme Color)
            document.documentElement.style.setProperty('--primary', primaryColor);

            // 2. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Background Image (Radial Gradient) ‡πÅ‡∏ö‡∏ö‡πÑ‡∏î‡∏ô‡∏≤‡∏°‡∏¥‡∏Å
            // ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏™‡∏µ Theme ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡∏°‡∏≤‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏™‡∏á‡∏à‡∏≤‡∏á‡πÜ (Alpha 0.05 - 0.1)
            document.body.style.backgroundImage = `
                radial-gradient(circle at 20% 30%, ${primaryColor}1a 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, ${primaryColor}0d 0%, transparent 40%)
            `;
            document.body.style.backgroundColor = bgColor;

            // 3. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≠‡∏ô Hover ‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏° Register
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á Style Tag ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏° Hover Shadow ‡πÅ‡∏•‡∏∞ Gradient ‡∏õ‡∏∏‡πà‡∏° Register
            let dynamicStyle = document.getElementById('dynamic-theme-style');
            if (!dynamicStyle) {
                dynamicStyle = document.createElement('style');
                dynamicStyle.id = 'dynamic-theme-style';
                document.head.appendChild(dynamicStyle);
            }
            dynamicStyle.innerHTML = `
                .btn-glow:hover, .btn-hero-primary:hover {
                    box-shadow: 0 8px 30px ${primaryColor}66 !important;
                }
                .nav-auth-register {
                    background: linear-gradient(135deg, ${primaryColor}, ${primaryColor}cc, ${primaryColor}99) !important;
                    border: 1px solid ${primaryColor}66 !important;
                    box-shadow: 0 4px 15px ${primaryColor}33 !important;
                }
                .nav-auth-register:hover {
                    box-shadow: 0 8px 25px ${primaryColor}66 !important;
                }
                .nav-auth-login:hover {
                    background: ${primaryColor}1f !important; /* ‡∏™‡∏µ‡∏à‡∏≤‡∏á‡πÜ 12% */
                }
            `;

            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ü‡∏≠‡∏ô‡∏ï‡πå (Text Color)
            if (config.textColor) {
                document.body.style.color = config.textColor;
                // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£
                document.querySelectorAll('h1, p, .stat-n').forEach(el => {
                    el.style.color = config.textColor;
                });
            }
        }
            // --- ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏µ (‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤) ---
            const primaryColor = config.themeColor || '#00d2ff';
    });

    // --- 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô REGISTER ---
    const registerForm = document.getElementById('register-form');
    if (registerForm) {
        registerForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('reg-username')?.value || document.getElementById('register-email')?.value;
            const password = document.getElementById('reg-password')?.value || document.getElementById('register-password')?.value;
            const confirmPassword = document.getElementById('confirm-password')?.value;

            if (confirmPassword && password !== confirmPassword) {
                Swal.fire({ icon: 'warning', title: '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô', heightAuto: false });
                return;
            }

            const fakeEmail = `${username}@testshop.com`;

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, fakeEmail, password);
                const user = userCredential.user;

                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Database
                await set(ref(db, 'users/' + user.uid), {
                    username: username,
                    credits: 0,
                    role: 'user',
                    createdAt: new Date().toISOString()
                });

                // ‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Register
                await sendUserLog("üÜï ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà", username, user.uid, 3066993);

                Swal.fire({
                icon: 'success',
                title: '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                text: `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì ${username}`,
                iconColor: themePrimary, // <--- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
                background: '#06070a',
                color: '#fff',
                showConfirmButton: false,
                timer: 2000,
                heightAuto: false,
                customClass: {
                    popup: 'border-glass-alert' // ‡∏Ñ‡∏•‡∏≤‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÅ‡∏ï‡πà‡∏á‡∏Ç‡∏≠‡∏ö‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á‡πÑ‡∏ß‡πâ
                }
            }).then(() => { 
                window.location.href = "shop.html"; 
            });

            } catch (error) {
                let msg = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£";
                if (error.code === 'auth/email-already-in-use') msg = "‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß";
                Swal.fire({ icon: 'error', title: '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', text: msg, heightAuto: false });
            }
        });
    }

    // --- 5. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö (Navbar) ---
    onAuthStateChanged(auth, (user) => {
    if (user) {
        const userRef = ref(db, 'users/' + user.uid);
        onValue(userRef, (snapshot) => {
            const data = snapshot.val();
            const credits = (data && data.credits) ? data.credits : 0;
            const displayName = user.email.split('@')[0];
            
            // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô Admin ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ---
            const isAdmin = data && data.role === 'admin';
            const adminMenuItem = isAdmin 
                ? `<li><a class="dropdown-item text-info" href="admin.html"><i class="fa-solid fa-user-shield me-2"></i>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö</a></li>
                   <li><hr class="dropdown-divider"></li>` 
                : '';
            // ------------------------------------------

            authArea.innerHTML = `
                <div class="dropdown">
                    <button class="nav-auth-btn nav-auth-login dropdown-toggle border-0" 
                            type="button" 
                            id="userMenu" 
                            data-bs-toggle="dropdown" 
                            aria-expanded="false"
                            style="cursor: pointer; z-index: 9999;">
                        <i class="fa-solid fa-circle-user me-2"></i> ${displayName}
                    </button>
                    <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end shadow-lg mt-2">
                        <li class="px-3 py-2">
                            <div class="small text-white-50">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
                            <div class="fw-bold text-primary">‡∏ø ${credits.toLocaleString()}</div>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        
                        ${adminMenuItem} <li><a class="dropdown-item" href="topup.html">‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</a></li>
                        <li><a class="dropdown-item" href="history.html">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" href="#" id="logout-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a></li>
                    </ul>
                </div>
            `;

            document.getElementById('logout-btn').addEventListener('click', () => {
                signOut(auth).then(() => { window.location.href = "login.html"; });
            });
        }, (error) => {
            console.error(error);
            authArea.innerHTML = `<span class="text-white-50 small">${user.email.split('@')[0]} (Error DB)</span>`;
        });
    } else {
        authArea.innerHTML = `
            <a href="login.html" class="nav-auth-btn nav-auth-login">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
            <a href="register.html" class="nav-auth-btn nav-auth-register">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
        `;
    }
});
</script>

    <div class="main-container container">
    <div class="login-card text-center">
        <i class="fa-solid fa-circle-user login-avatar"></i>
        <h2 class="fw-bold mb-2">LOGIN</h2>
        <p class="text-white-50 small mb-4">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</p>
        
        <form id="login-form">
            <div class="input-group-custom">
                <i class="fa-solid fa-user"></i>
                <input type="text" id="login-username" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Username)" required>
            </div>

            <div class="input-group-custom">
                <i class="fa-solid fa-lock"></i>
                <input type="password" id="login-password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password)" required>
            </div>

            <div class="d-flex justify-content-between mb-4 px-1">
                <label class="small text-white-50" style="cursor: pointer;">
                    <input type="checkbox" id="remember-me" class="me-1"> ‡∏à‡∏î‡∏à‡∏≥‡∏â‡∏±‡∏ô
                </label>
                <a href="#" class="small text-info text-decoration-none">‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?</a>
            </div>

            <button type="submit" class="btn-login">
                <div class="nav-auth-shine"></div>
                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            </button>
        </form>

        <div class="mt-4 small text-white-50">
            ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a href="register.html" class="text-primary text-decoration-none fw-bold">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
        </div>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>